function getImageSource(t){return"./img/"+t+".jpg"}function changePicture(t){if(0==isStartGame||t&&"Win!"==t){var e=document.getElementById("picture").value;if(""===e)document.getElementById("board").innerHTML="<p>By zagrać w puzzle wybierz obrazek z listy powyżej, dostosuj poziom trudności i kliknij start.</p>";else{var a='<img class="obraz" src="'+getImageSource(e)+'" alt="'+e+'" />';document.getElementById("board").innerHTML=a}}}function tryMoveElement(t){var e=parseInt(t.target.getAttribute("data-possition-i")),a=parseInt(t.target.getAttribute("data-possition-j"));e-1>=0&&1==placeEmptySquare[e-1][a]?(moveElement(t.target,e-1,a),sprWin(e,a)):e+1<placeEmptySquare.length&&1==placeEmptySquare[e+1][a]?(moveElement(t.target,e+1,a),sprWin(e,a)):a-1>=0&&1==placeEmptySquare[e][a-1]?(moveElement(t.target,e,a-1),sprWin(e,a)):a+1<placeEmptySquare.length&&1==placeEmptySquare[e][a+1]&&(moveElement(t.target,e,a+1),sprWin(e,a))}function sprWin(t,e){if(placeEmptySquare[t][e]=1,t==placeEmptySquare.length-1&&e==placeEmptySquare.length-1){for(var a=document.getElementById("board").childNodes,i=0;i<a.length;i++){var n=parseInt(a[i].getAttribute("data-possition-i")),o=parseInt(a[i].getAttribute("data-possition-j")),r=parseInt(a[i].getAttribute("data-right-possition-i")),s=parseInt(a[i].getAttribute("data-right-possition-j"));if(n!=r||o!=s)return}win()}}function win(){stopGame(),openDialogBox()}function openDialogBox(){document.getElementById("dialogBox").style.display="block"}function closeDialogBox(){document.getElementById("dialogBox").style.display="none"}function moveElement(t,e,a){t.setAttribute("data-possition-i",e),t.setAttribute("data-possition-j",a),t.style.top=positionsTab[e][a].top+"px",t.style.left=positionsTab[e][a].left+"px",placeEmptySquare[e][a]=0}function shufflingPicture(){for(var t=document.getElementById("board").childNodes,e=0;e<100;e++){var a=random(0,t.length),i=random(0,t.length);a_i=parseInt(t[a].getAttribute("data-possition-i")),a_j=parseInt(t[a].getAttribute("data-possition-j")),b_i=parseInt(t[i].getAttribute("data-possition-i")),b_j=parseInt(t[i].getAttribute("data-possition-j")),moveElement(t[a],b_i,b_j),moveElement(t[i],a_i,a_j)}}function random(t,e){if(t<e){var a=e-t,i=a.toString().length,n=Math.random()*Math.pow(10,i);return n=Math.round(n),n%=a,n+=t}}function stopGame(){document.getElementById("startButton").setAttribute("onclick","startGame()"),document.getElementById("startButton").innerText="Start!",document.getElementById("descriptionButtonStartStop").innerText="Rozpocznij grę:";var t=document.getElementById("board");null!==t.getAttribute("data-imgName")&&(document.getElementById("picture").value=t.getAttribute("data-imgName")),t.removeAttribute("data-imgName"),changePicture("Win!"),placeEmptySquare=[],positionsTab=[],isStartGame=!1}function startGame(){var t=document.getElementById("picture").value;if(""!==t){var e=parseInt(document.getElementById("dificulty").value),a=document.getElementById("board");a.setAttribute("data-imgName",t),t=getImageSource(t);var i=540/(e+=2);document.getElementById("startButton").setAttribute("onclick","stopGame()"),document.getElementById("startButton").innerText="Stop",document.getElementById("descriptionButtonStartStop").innerText="Zatrzymaj grę:",a.innerHTML="",placeEmptySquare=[],positionsTab=[],isStartGame=!0;for(var n=0;n<e;n++){positionsTab.push([]),placeEmptySquare.push([]);for(var o=0;o<e;o++){var r=i*n,s=i*o;placeEmptySquare[n][o]=0,positionsTab[n][o]=[],positionsTab[n][o].top=r,positionsTab[n][o].left=s;var p=document.createElement("div");p.classList.add("partPicture"),p.setAttribute("data-possition-i",n),p.setAttribute("data-possition-j",o),p.setAttribute("data-right-possition-i",n),p.setAttribute("data-right-possition-j",o),p.style.top=r+"px",p.style.left=s+"px",p.style.height=i+"px",p.style.width=i+"px",p.style.background="url("+t+") -"+s+"px -"+r+"px",p.addEventListener("click",tryMoveElement,!1),a.appendChild(p)}}placeEmptySquare[placeEmptySquare.length-1][placeEmptySquare.length-1]=1,a.removeChild(a.lastChild),shufflingPicture()}}placeEmptySquare=[],positionsTab=[],isStartGame=!1;